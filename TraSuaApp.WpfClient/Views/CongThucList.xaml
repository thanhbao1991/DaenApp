<Window
    x:Class="TraSuaApp.WpfClient.AdminViews.CongThucMasterDetailList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Style="{StaticResource BasePopupWindowStyle}"
    WindowStartupLocation="CenterScreen">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <DockPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Name="TieuDeTextBlock" Style="{StaticResource TitleTextStyle}" />
            <Button
                Click="CloseButton_Click"
                DockPanel.Dock="Right"
                Style="{StaticResource CloseButtonStyle}" />
        </DockPanel>

        <!--  Body  -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" />
                <ColumnDefinition Width="10" />
                <ColumnDefinition Width="3*" />
            </Grid.ColumnDefinitions>

            <!--  =====================  -->
            <!--  LEFT: CONG THUC (MASTER)  -->
            <!--  =====================  -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Toolbar CongThuc  -->
                <Grid Grid.Row="0" Margin="10,0,10,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <Grid Margin="0,0,4,0">
                        <TextBox
                            x:Name="CongThucSearchTextBox"
                            Style="{StaticResource SearchTextBoxStyle}"
                            TextChanged="CongThucSearchTextBox_TextChanged" />
                        <TextBlock
                            Style="{StaticResource SearchHintTextStyle}"
                            Text="Tìm công thức..."
                            Visibility="{Binding Text.IsEmpty, ElementName=CongThucSearchTextBox, Converter={StaticResource BoolToVisibilityConverter}}" />
                    </Grid>

                    <StackPanel
                        Grid.Column="1"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                        <Button
                            Width="80"
                            Margin="0,0,4,0"
                            Click="CongThucAddButton_Click"
                            Content="Thêm"
                            Style="{StaticResource AddButtonStyle}" />
                        <Button
                            Width="80"
                            Margin="0,0,4,0"
                            Click="CongThucEditButton_Click"
                            Content="Sửa"
                            Style="{StaticResource EditButtonStyle}" />
                        <Button
                            Width="80"
                            Margin="0,0,4,0"
                            Click="CongThucDeleteButton_Click"
                            Content="Xoá"
                            Style="{StaticResource DeleteButtonStyle}" />
                        <Button
                            Width="80"
                            Click="CongThucReloadButton_Click"
                            Content="Tải lại"
                            Style="{StaticResource ReloadButtonStyle}" />
                    </StackPanel>
                </Grid>

                <!--  DataGrid CongThuc  -->
                <DataGrid
                    x:Name="CongThucDataGrid"
                    Grid.Row="1"
                    Margin="10"
                    AutoGenerateColumns="False"
                    CanUserSortColumns="False"
                    IsReadOnly="True"
                    MouseDoubleClick="CongThucDataGrid_MouseDoubleClick"
                    SelectionChanged="CongThucDataGrid_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Width="50"
                            Binding="{Binding Stt}"
                            ElementStyle="{StaticResource CenterTextCellStyle}"
                            Header="STT" />

                        <DataGridTextColumn
                            Width="*"
                            Binding="{Binding TenSanPham}"
                            ElementStyle="{StaticResource LeftTextCellStyle}"
                            Header="Sản phẩm" />

                        <DataGridTextColumn
                            Width="Auto"
                            MinWidth="80"
                            Binding="{Binding TenBienThe}"
                            ElementStyle="{StaticResource LeftTextCellStyle}"
                            Header="Biến thể" />

                        <DataGridTextColumn
                            Width="Auto"
                            MinWidth="60"
                            Binding="{Binding Loai}"
                            ElementStyle="{StaticResource CenterTextCellStyle}"
                            Header="Loại" />

                        <DataGridCheckBoxColumn
                            Width="Auto"
                            MinWidth="70"
                            Binding="{Binding IsDefault}"
                            ElementStyle="{StaticResource DataGridCheckBoxElementStyle}"
                            Header="Mặc định" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>

            <!--  Separator  -->
            <Border
                Grid.Column="1"
                Margin="0,10"
                Background="#22000000" />

            <!--  =====================  -->
            <!--  RIGHT: SU DUNG NL (DETAIL)  -->
            <!--  =====================  -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Title + Toolbar SuDung  -->
                <StackPanel Grid.Row="0" Margin="10,0,10,10">


                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>

                        <Grid Margin="0,0,4,0">
                            <TextBox
                                x:Name="SuDungSearchTextBox"
                                Style="{StaticResource SearchTextBoxStyle}"
                                TextChanged="SuDungSearchTextBox_TextChanged" />
                            <TextBlock
                                Style="{StaticResource SearchHintTextStyle}"
                                Text="Tìm nguyên liệu..."
                                Visibility="{Binding Text.IsEmpty, ElementName=SuDungSearchTextBox, Converter={StaticResource BoolToVisibilityConverter}}" />
                        </Grid>

                        <StackPanel
                            Grid.Column="1"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                x:Name="SuDungAddButton"
                                Width="80"
                                Margin="0,0,4,0"
                                Click="SuDungAddButton_Click"
                                Content="Thêm"
                                Style="{StaticResource AddButtonStyle}" />
                            <Button
                                x:Name="SuDungEditButton"
                                Width="80"
                                Margin="0,0,4,0"
                                Click="SuDungEditButton_Click"
                                Content="Sửa"
                                Style="{StaticResource EditButtonStyle}" />
                            <Button
                                x:Name="SuDungDeleteButton"
                                Width="80"
                                Margin="0,0,4,0"
                                Click="SuDungDeleteButton_Click"
                                Content="Xoá"
                                Style="{StaticResource DeleteButtonStyle}" />
                            <Button
                                x:Name="SuDungReloadButton"
                                Width="80"
                                Click="SuDungReloadButton_Click"
                                Content="Tải lại"
                                Style="{StaticResource ReloadButtonStyle}" />
                        </StackPanel>
                    </Grid>
                </StackPanel>

                <!--  DataGrid SuDung  -->
                <DataGrid
                    x:Name="SuDungNguyenLieuDataGrid"
                    Grid.Row="1"
                    Margin="10"
                    AutoGenerateColumns="False"
                    CanUserSortColumns="False"
                    MouseDoubleClick="SuDungNguyenLieuDataGrid_MouseDoubleClick">
                    <DataGrid.Columns>
                        <DataGridTextColumn
                            Width="50"
                            Binding="{Binding Stt}"
                            ElementStyle="{StaticResource CenterTextCellStyle}"
                            Header="STT" />
                        <DataGridTextColumn
                            Width="2*"
                            Binding="{Binding TenNguyenLieu}"
                            ElementStyle="{StaticResource LeftTextCellStyle}"
                            Header="Nguyên liệu" />
                        <DataGridTextColumn
                            Width="1*"
                            Binding="{Binding SoLuong}"
                            ElementStyle="{StaticResource CenterTextCellStyle}"
                            Header="Số lượng" />
                        <DataGridTextColumn
                            Width="1*"
                            Binding="{Binding DonViTinh}"
                            ElementStyle="{StaticResource CenterTextCellStyle}"
                            Header="ĐVT" />
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Grid>
    </Grid>
</Window>
