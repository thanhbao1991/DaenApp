@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>

        // 🟟 Xem danh sách hóa đơn theo filter
        function xemHoaDon(type, ngay, thang, nam) {
            $('#hoaDonContent').html("<p>Đang tải dữ liệu...</p>");
            $('#hoaDonModal').modal('show');
            fetch(`/DanhSachHoaDon?type=${type}&ngay=${ngay}&thang=${thang}&nam=${nam}`)
                .then(res => res.text())
                .then(html => {
                    $('#hoaDonContent').html(html);
                })
                .catch(err => {
                    $('#hoaDonContent').html("<p class='text-danger'>Lỗi tải dữ liệu</p>");
                    console.error(err);
                });
        }

        // 🟟 Capture ảnh màn hình
        function captureImage() {
            html2canvas(document.querySelector("#modalContent")).then(canvas => {
                const image = canvas.toDataURL("image/png");
                const imgTag = `<img src="${image}" class="img-fluid border"/>`;
                document.getElementById("imagePreview").innerHTML = imgTag;

                // Tải xuống file
                const link = document.createElement("a");
                const now = new Date();
                const fileName = `DoanhThu_${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2,'0')}${now.getDate().toString().padStart(2,'0')}.png`;
                link.download = fileName;
                link.href = image;
                link.click();
            });
        }
    </script>

    <style>
        .item-row {
            font-size: 0.95rem;
        }
        .item-text {
            display: inline-flex;
            align-items: center;
            gap: 0.4em;
            line-height: 1.4;
        }
        .item-note {
            font-size: 0.85em;
            opacity: 0.5;
            padding-left: 2em;
            line-height: 1.2;
        }
    </style>
}